<template>
  <aside class="sidebar">
    <div class="sidebar-brand">
      <span class="sidebar-logo">VM</span>
      <span class="sidebar-title">VideoMixer</span>
    </div>

    <div class="sidebar-section-label">å¹³å°</div>

    <nav class="sidebar-nav">
      <button
        v-for="p in platforms"
        :key="p.id"
        :class="['sidebar-item', { active: p.id === activePlatform, disabled: !p.enabled }]"
        :disabled="!p.enabled"
        @click="p.enabled && $emit('selectPlatform', p.id)"
      >
        <span class="sidebar-item-icon">{{ p.icon }}</span>
        <span class="sidebar-item-name">{{ p.name }}</span>
        <span v-if="!p.enabled" class="sidebar-item-badge">å³å°†ä¸Šçº¿</span>
      </button>
    </nav>

    <div class="sidebar-footer">
      <div v-if="updateInfo" class="sidebar-update" @click="$emit('showUpdate')">
        <span class="sidebar-update-dot"></span>
        æœ‰æ–°ç‰ˆæœ¬å¯ç”¨
      </div>
      <div class="sidebar-version">v1.0.0</div>
    </div>
  </aside>
</template>

<script setup>
defineProps({
  activePlatform: { type: String, default: 'weixin' },
  updateInfo: { type: Object, default: null },
})

defineEmits(['selectPlatform', 'showUpdate'])

const platforms = [
  { id: 'weixin', name: 'è§†é¢‘å·', icon: 'ğŸ“º', enabled: true },
  { id: 'douyin', name: 'æŠ–éŸ³', icon: 'ğŸµ', enabled: false },
  { id: 'kuaishou', name: 'å¿«æ‰‹', icon: 'âš¡', enabled: false },
  { id: 'xiaohongshu', name: 'å°çº¢ä¹¦', icon: 'ğŸ“•', enabled: false },
  { id: 'bilibili', name: 'Bç«™', icon: 'ğŸ“¹', enabled: false },
  { id: 'weibo', name: 'å¾®åš', icon: 'ğŸ’¬', enabled: false },
]
</script>
